{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '44377249-dc3d438c16ab3b76144728d61';\n\nexport async function fetchImages(query, page, perPage) {\n  const url = 'https://pixabay.com/api/';\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true',\n    per_page: perPage,\n    page: page,\n  });\n\n  const response = await axios.get(url, { params });\n\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst lightbox = new SimpleLightbox('.results a', {\n  captionsData: 'title',\n  captionDelay: 0,\n});\n\nexport function renderImages(content, images) {\n  images.forEach(hit => {\n    const imgCard = `\n             <a href=\"${hit.largeImageURL}\" class='img-link' data-lightbox=\"gallery\">\n                <div class=\"img-card\">\n                    <img src=\"${hit.webformatURL}\" width='358' height='152' alt=\"${hit.tags}\" title=\"${hit.tags}\">\n                    <div class=\"card-info\">\n                        <p>Likes <span class='span-data'>${hit.likes}</span></p>\n                        <p>Views <span class='span-data'>${hit.views}</span></p>\n                        <p>Comments <span class='span-data'>${hit.comments}</span></p>\n                        <p>Downloads <span class='span-data'>${hit.downloads}</span></p>\n                    </div>\n                </div>\n            </a>`;\n    content.insertAdjacentHTML('beforeend', imgCard);\n  });\n\n  lightbox.refresh();\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\n\nconst input = document.getElementById('photos_input');\nconst submitBtn = document.getElementById('submit_button');\nconst content = document.querySelector('.results');\nconst loading = document.querySelector('.loading-img');\nconst loadBtn = document.getElementById('load-btn');\n\nlet curPage = 1;\nlet curQuery = '';\nconst perPage = 15; //200 to check\nlet totalHits = 0;\nlet showedHits = 0;\n\nloading.classList.add('hidden');\n\nsubmitBtn.addEventListener('click', async () => {\n  const value = input.value.trim();\n  if (!value) {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please fill the search field first.',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  curQuery = value;\n  curPage = 1;\n\n  content.innerHTML = '';\n  loading.classList.remove('hidden');\n  loadBtn.classList.add('hidden');\n\n  try {\n    const data = await fetchImages(curQuery, curPage, perPage);\n    loading.classList.add('hidden');\n\n    if (!data.hits || data.hits.length === 0) {\n      iziToast.warning({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        maxWidth: '400px',\n        color: '#b90e0a',\n        messageColor: '#fff',\n        messageLineHeight: '150%',\n        messageSize: '16px',\n      });\n      input.value = '';\n      return;\n    }\n\n    totalHits = data.totalHits;\n    showedHits = data.hits.length;\n\n    renderImages(content, data.hits);\n    if (showedHits < totalHits) {\n      loadBtn.classList.remove('hidden');\n    }\n  } catch (error) {\n    loading.classList.add('hidden');\n    console.log(error);\n  }\n});\n\nloadBtn.addEventListener('click', async () => {\n  curPage++;\n  loadBtn.classList.add('hidden');\n  loading.classList.remove('hidden');\n\n  try {\n    const data = await fetchImages(curQuery, curPage, perPage);\n    loading.classList.add('hidden');\n\n    if (data.hits && data.hits.length > 0) {\n      showedHits += data.hits.length;\n      //   console.log(showedHits);\n      renderImages(content, data.hits);\n      if (showedHits > totalHits) {\n        loadBtn.classList.add('hidden');\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n          maxWidth: '400px',\n          color: '#b90e0a',\n          messageColor: '#fff',\n          messageLineHeight: '150%',\n          messageSize: '16px',\n          backgroundColor: 'aqua',\n        });\n      } else {\n        loadBtn.classList.remove('hidden');\n      }\n      smoothScroll();\n    }\n  } catch (error) {\n    loading.classList.add('hidden');\n    loadBtn.classList.add('hidden');\n    console.log(error);\n  }\n});\n\ninput.addEventListener('keypress', event => {\n  if (event.key === 'Enter') {\n    submitBtn.click();\n  }\n});\n\nfunction smoothScroll() {\n  const firstCard = document.querySelector('.img-card');\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n"],"names":["API_KEY","fetchImages","query","page","perPage","url","params","axios","lightbox","SimpleLightbox","renderImages","content","images","hit","imgCard","input","submitBtn","loading","loadBtn","curPage","curQuery","totalHits","showedHits","value","iziToast","data","error","smoothScroll","event","firstCard","cardHeight"],"mappings":"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"}